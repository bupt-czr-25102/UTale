# 雏雁项目统一开发标准

## 一、技术栈选择

| 技术领域 | 选择 | 解释 |
|---------|------|--------------|
| 前端框架 | 微信小程序原生开发 | 微信官方提供的开发框架，学习资源丰富，适合小程序开发入门 |
| 后端框架 | Python Flask | 轻量级Python Web框架，上手简单，适合快速开发API |
| 数据库 | MySQL | 关系型数据库，使用广泛，学习资料多，适合初学者理解数据结构 |
| AI服务 | DeepSeek API | 国内AI大模型API，中文支持好，文档清晰，调用简单 |

## 二、项目架构设计

### 1. 前后端分离架构
- **选择**：采用前后端分离架构
- **解释**：前端（微信小程序）和后端（Flask API）分开开发，通过API接口进行数据交互。这样可以降低耦合度，每个开发者可以专注于自己负责的模块。

### 2. RESTful API设计风格
- **选择**：采用RESTful API设计风格
- **解释**：一种流行的API设计规范，使用HTTP方法（GET/POST/PUT/DELETE）表示操作类型，使用URL表示资源。例如：
  - GET /api/diaries - 获取日记列表
  - POST /api/diaries - 创建新日记
  - PUT /api/diaries/1 - 更新ID为1的日记
  - DELETE /api/diaries/1 - 删除ID为1的日记

## 三、数据库设计规范

### 1. 表命名规则
- **选择**：采用下划线分隔的小写命名（snake_case）
- **解释**：例如 `user_diary`、`video_info`，这种命名方式清晰易读，符合MySQL的命名习惯。

### 2. 字段命名规则
- **选择**：采用下划线分隔的小写命名
- **解释**：例如 `user_id`、`diary_content`，与表命名风格保持一致。

### 3. 主键设计
- **选择**：统一使用`id`字段作为主键，自增整数类型
- **解释**：每个表都有一个唯一的`id`字段，方便数据管理和关联查询。

### 4. 通用字段
- **选择**：添加`created_at`（创建时间）和`updated_at`（更新时间）字段
- **解释**：记录数据的创建和更新时间，便于追踪数据变化。

## 四、API设计规范

### 1. 接口路径规范
- **选择**：采用复数形式的资源路径
- **解释**：例如 `/api/diaries`、`/api/videos`，符合RESTful设计风格。

### 2. 请求/响应格式
- **选择**：统一使用JSON格式
- **解释**：JSON是前后端数据交互的常用格式，微信小程序和Flask都对JSON有良好的支持。

### 3. 响应结构
- **选择**：统一包含`code`、`message`和`data`字段
- **解释**：
  - `code`：状态码（200表示成功，其他表示错误）
  - `message`：提示信息
  - `data`：返回的数据
  - 示例：`{"code": 200, "message": "success", "data": {"diaries": [...]}}`

## 五、代码规范与命名约定

### 1. 前端代码规范（微信小程序）
- **文件命名**：采用下划线分隔的小写命名（例如 `diary_list.wxml`）
- **变量命名**：采用驼峰命名法（例如 `diaryList`）
- **函数命名**：采用动词开头的驼峰命名法（例如 `getDiaryList`）

### 2. 后端代码规范（Python Flask）
- **文件命名**：采用下划线分隔的小写命名（例如 `diary_service.py`）
- **变量命名**：采用下划线分隔的小写命名（例如 `diary_title`）
- **函数命名**：采用下划线分隔的小写命名（例如 `get_diary_list`）
- **类命名**：采用驼峰命名法（例如 `DiaryService`）

## 六、版本控制规范

### 1. GitHub使用简化方案
- **选择**：减少GitHub的使用频率，采用"定期上传"策略
- **解释**：
  1. 每个开发者在本地开发自己的模块
  2. 完成一个阶段的开发后，将代码打包成ZIP文件
  3. 通过微信/QQ等聊天工具发送给负责人
  4. 负责人定期将代码整合到主项目中

### 2. 代码文件结构
- **选择**：采用统一的文件结构
- **解释**：
  ```
  雏雁项目/
  ├── frontend/              # 前端代码（微信小程序）
  │   ├── pages/            # 页面文件
  │   │   ├── diary/        # AI日记模块页面
  │   │   ├── video/        # AI视频模块页面
  │   │   ├── schedule/     # 日程管理模块页面
  │   │   └── community/    # 社区模块页面
  │   ├── utils/            # 工具函数
  │   └── app.js            # 小程序入口文件
  ├── backend/               # 后端代码（Flask）
  │   ├── app.py            # Flask应用入口
  │   ├── config.py         # 配置文件
  │   ├── models/           # 数据库模型
  │   ├── routes/           # API路由
  │   └── services/         # 业务逻辑
  └── database/             # 数据库文件
      └── schema.sql        # 数据库表结构
  ```

## 七、协作与沟通规范

### 1. 定期汇报
- **选择**：每周进行一次进度汇报
- **解释**：每个开发者在每周固定时间（例如周日晚上）汇报本周完成的工作和遇到的问题，便于负责人了解项目进度。

### 2. 问题沟通
- **选择**：使用微信群进行问题沟通
- **解释**：遇到技术问题时，在微信群中提问，团队成员共同讨论解决，提高沟通效率。

### 3. 代码整合
- **选择**：负责人统一整合代码
- **解释**：每个开发者完成模块后，将代码发送给负责人，由负责人进行统一整合和测试，减少冲突。

## 八、文件存储与命名规范

### 1. 文件命名
- **选择**：采用清晰的命名，包含模块名称和功能描述
- **解释**：例如 `diary_list_page.wxml`（AI日记模块的列表页面）、`get_diary_data.py`（获取日记数据的后端脚本）

### 2. 文件夹结构
- **选择**：按功能模块划分文件夹
- **解释**：每个模块有独立的文件夹，包含该模块的所有代码文件，便于管理和查找。

## 九、测试与调试规范

### 1. 单元测试
- **选择**：简单测试为主，确保功能正常
- **解释**：每个功能模块完成后，进行简单的功能测试，确保基本功能正常运行。

### 2. 调试方法
- **选择**：使用开发工具自带的调试功能
- **解释**：微信开发者工具和Flask都有调试功能，可以帮助定位和解决问题。

## 十、安全规范

### 1. 数据安全
- **选择**：敏感数据加密存储
- **解释**：用户密码等敏感数据需要进行加密存储，避免明文保存。

### 2. API安全
- **选择**：添加简单的API密钥验证
- **解释**：在API请求中添加API密钥，防止未授权访问。
